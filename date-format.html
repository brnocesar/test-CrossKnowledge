<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <title>CrossKnowledge - Code challenge</title>
    </head>

    <body>
        <script>
            // This will create elements for testing, don't change this code
            (() => {
                const MS_PER_MINUTE = 60000
                const NOW = new Date()
                let minutes = [0, 1, 30, 60, 6 * 60, 23 * 60, 24 * 60]
                let dates = []

                minutes.forEach((i) => dates.push(new Date(NOW - i * MS_PER_MINUTE)))

                dates.forEach((item) => {
                    let el = document.createElement("div")
                    el.innerHTML = "Started "

                    let dt = document.createElement('span')
                    dt.className = 'js-date-format'
                    dt.innerHTML = item.toISOString()
                    el.appendChild(dt)
                    document.body.appendChild(el)
                })
            })();

            (() => {
                var date_elements = document.getElementsByClassName('js-date-format');
                
                for (date of date_elements) {
                    countTime(date)
                }
            })();

            function countTime(date) {

                let seconds = parseInt((new Date() - new Date(date.innerText)) / 1000)

                if ( seconds < 60 ) {
                    date.innerText = `${seconds} seconds ago`
                    return
                }

                let minutes = seconds / 60
                if ( minutes < 60 ) {
                    date.innerText = `${minutes} minutes ago`
                    return
                }

                let hours = minutes / 60
                if ( hours < 24 ) {
                    date.innerText = `${hours} hours ago`
                    return
                }
            }
        </script>
    </body>
</html>